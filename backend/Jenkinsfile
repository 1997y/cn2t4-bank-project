pipeline {
    agent any

    environment {
        COMPOSE_PROJECT_NAME = 'bank-project'
        DOCKERHUB_CREDENTIALS = credentials('docker-hub-credentials')  // ì˜µì…˜, ë‚˜ì¤‘ì— ì“°ê³  ì‹¶ìœ¼ë©´
        GIT_COMMIT_HASH = ''
    }

    stages {
        stage('Checkout') {
            steps {
                echo "ğŸ”„ Git Checkout ì‹œì‘"   
                checkout scm
            }
        }

        stage('Set Git Commit Hash') {
            steps {
                script {
                    GIT_COMMIT_HASH = sh(script: "git rev-parse --short HEAD", returnStdout: true).trim()
                    echo "Git Commit Hash: ${GIT_COMMIT_HASH}"
                }
            }
        }

        stage('Build Docker Image') {
                steps {
                    // ë„ì»¤ ì´ë¯¸ì§€ ë¹Œë“œ
                    sh 'docker build -t your-docker-image-name .'
                }
            }
    }

    post {
        success {
            echo 'ğŸ—ï¸ Docker Compose Build & Up ì„±ê³µ!'
        }
        failure {
            echo 'âŒ Docker Compose ì‹¤íŒ¨'
        }
    }
}